#CONTROLLER TO ENSURE EVERYTHING HAPPENS IN THE CORRECT ORDER

#open TPM simulators
bash openTPMSimulators

#start serverB part 1
cd ServerB
bash ServerBPart1

#copy the public portion of the parent object from Server B to Server A
cp newParent.pub ../ServerA

#return to parent directory
cd ..

#start serverA part 1
cd ServerA
bash ServerAPart1

#copy dup files to Server B
cp dup.pub dup.dpriv dup.seed data.encrypted sig.rssa ../ServerB

#return to parent directory
cd ..

#start Server B part 2
cd ServerB
bash ServerBPart2

#return to parent directory
cd ..

#start Server A part 2
cd ServerA
bash ServerAPart2

#copy the encrypted symmetric key from Server A to Server B
cp aes.enc symsig.rssa symsecret.enc ../ServerB

#return to parent directory
cd ..

#start serverB part 3
cd ServerB
bash ServerBPart3
